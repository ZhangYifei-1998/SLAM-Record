
# SLAM-Record
# SLAM

## 数学基础

IDE：Clion

库：Eigen(矩阵和向量等几何模块），Sophus(李代数库） ,OpenCV（图像处理算法库，提供了大量的开源图像算法，如：基本的读取、显示、复制、旋转、插值，复杂的SGBM算法计算左右图像的时差，OpenCV-3.1.0），Ceres(最小二乘问题求解库，优化库)，g2o（一个通用的图优化库-用它来拟合曲线必须先把问题转换为图优化，定义新的顶点和边，这样做是有一些迂回的，相比于Ceres确实有一些迂回，但是在SLAM中，一个带有许多个相机位姿和许多个空间点的优化问题是主流问题，特别是当相机位姿用李代数表述的时候，而g2o提供了大量现成的顶点和边，非常便于相机位姿估计问题，而在Ceres中我们则需要自己去实现每一个Cost Function）

### 视觉里程计、四种变化、李群李代数

视觉里程计：相邻图像间的相机运动（关系），最简单情况下，每次只估计两张图像间的运动，而每次估计都会有一定的误差，误差累积则会得到漂移（解决方法：回环检测（把机器人回到原始位置事件监测出来（依据：图像数据相似性））和后端优化（根据上面所述事件，校正整个轨迹的形状（手段：滤波器或非线性优化）））

欧式、相似、仿射、射影变换：

欧式变换：SO(n)：特殊正交群，代表了由n维空间的旋转矩阵（性质：行列式为1的正交矩阵）组成的集合。SE（3）特殊欧式群，该群中的任意一个元素都涵盖了平移和旋转：

$$SE(3)=\{T=\begin{bmatrix}R&t\\0&1\end{bmatrix}\in\R^{4*4}|R\in SO(3),t\in\R^{3}\}$$

相似变换：下面是相似变换群，多了一个自由度，因为多了一个缩放因子，允许物体进行均匀缩放：

$$Sim(3)=\{T=\begin{bmatrix}sR&t\\0&1\end{bmatrix}\in\R^{4*4}|R\in SO(3),t\in\R^{3}\}$$

仿射变换（正交投影）：与R不同，A只需要是一个可逆矩阵，不必正交，变换后，立方体不再方，但各个面仍然是平行四边形。

$$T=\begin{bmatrix}A&t\\0&1\end{bmatrix}$$

射影变换：最一般的变换，aT为缩放，v说不明白，不重要。

$$T_p=\begin{bmatrix}A&t\\a^T&v\end{bmatrix}$$

变换：

欧式：

相似

仿射

射影

自由度：

6

7

12

15

不变性质：从上往下包含关系

长度、夹角、体积

体积比

平行性、体积比

接触平面的相交和相切

 引入李群和李代数的原因：旋转矩阵自身带有约束（正交且行列式为1），将它们作为优化变量会引入额外的约束，使优化变得困难。通过李群-李代数间的转换关系，可以吧位姿估计变成无约束的优化问题，简化求解方式。

之前用四元数、欧拉角表示旋转，之后可以用李代数来表示旋转，这样可以简化后续的处理，实际应用中，也可以用SO(3)加平移的方式来代替SE(3),从而避免一些雅克比的计算。

### 非线性优化-状态估计问题

数据噪声不可避免，处理这个状态估计问题的方法大致分成两种。由于SLAM中的数据是随时间渐进到来的，所以我们应该持有一个当前时刻的估计状态，然后用新的数据来更新它，这种方法成为增量\渐进方法，术语则是滤波器。另一种方法则是把数据“攒”起来一并处理，这种方式成为批量方法。

大体来说，增量方法仅关注当前时刻的状态估计Xk，批量方法可以在更大的范围达到最优化，被认为优于传统的滤波器，而成为当前的主流方法。批量方法运算量过大，不够实时，折中方法：滑动窗口估计法，固定一些历史轨迹，仅对当前时刻附近的一些轨迹进行优化。

关键点和描述子

OpenCV提取ORB特征，并进行匹配，根据匹配结果估计相机运动

单目：根据2D点估计相机运动，怼积极和

双目 rgbd:两组3D点估计运动，用ICP解决

3D+2D可以用Pnp求解（P3P()、DLT、BA（光束法平差））
